# Phase 3 å®ŒæˆæŠ¥å‘Š

**æ—¥æœŸï¼š** 2026-02-07  
**ç‰ˆæœ¬ï¼š** 33453a1  
**é˜¶æ®µï¼š** Phase 3 - Multi-CLI Integration  

---

## ğŸ“Š å®Œæˆæ€»ç»“

**çŠ¶æ€ï¼šâœ… 100% å®Œæˆ**

| ä»»åŠ¡ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| Codex Agent | âœ… å®Œæˆ | å®Œæ•´å®ç°ï¼Œæµ‹è¯•é€šè¿‡ |
| Gemini Agent | âœ… å®Œæˆ | å®Œæ•´å®ç°ï¼Œæµ‹è¯•é€šè¿‡ |
| å‚æ•°æ ¼å¼é€‚é… | âœ… å®Œæˆ | è‡ªåŠ¨å¤„ç†ä¸åŒ CLI æ ¼å¼ |
| Agent æ³¨å†Œ | âœ… å®Œæˆ | main.py åŠ¨æ€åŠ è½½ |
| æµ‹è¯•å¥—ä»¶ | âœ… å®Œæˆ | 3/3 æµ‹è¯•é€šè¿‡ |
| æ–‡æ¡£å®Œå–„ | âœ… å®Œæˆ | docs/AGENTS.md |

---

## ğŸ¯ å®ç°çš„åŠŸèƒ½

### 1ï¸âƒ£ CodexAgent (GPT-5.3 Codex)

**æ–‡ä»¶ï¼š** `agents/codex_cli.py`

**æ”¯æŒçš„æ¨¡å‹ï¼š**
- `gpt5.3` â†’ `gpt-5.3-codex`

**æ”¯æŒçš„å‚æ•°ï¼š**
- `temperature` â†’ `--temperature` (0-2)
- `max_tokens` â†’ `--max-tokens` (æ•´æ•°)

**å‘½ä»¤æ ¼å¼ï¼š**
```bash
codex --prompt "your prompt" --session <uuid> --model gpt-5.3-codex --temperature 0.7 --max-tokens 1000
```

---

### 2ï¸âƒ£ GeminiAgent (Gemini 3 Pro)

**æ–‡ä»¶ï¼š** `agents/gemini_cli.py`

**æ”¯æŒçš„æ¨¡å‹ï¼š**
- `gemini3` â†’ `gemini-3-pro-preview`

**æ”¯æŒçš„å‚æ•°ï¼š**
- `temperature` â†’ `--temp` (0-1)

**å‘½ä»¤æ ¼å¼ï¼š**
```bash
gemini-cli -p "your prompt" -m gemini-3-pro-preview --temp 0.8
```

**æ³¨æ„ï¼š** å‚æ•°æ ‡å¿—ä¸ Codex ä¸åŒï¼ˆ`--temp` vs `--temperature`ï¼‰

---

### 3ï¸âƒ£ å‚æ•°æ ¼å¼è‡ªåŠ¨é€‚é…

Gateway è‡ªåŠ¨å¤„ç†ä¸åŒ CLI çš„å‚æ•°æ ¼å¼ï¼š

| Agent | æ¸©åº¦å‚æ•°æ ‡å¿— | ç¤ºä¾‹ |
|-------|-------------|------|
| Claude | `--thinking` | `--thinking high` |
| Codex | `--temperature` | `--temperature 0.7` |
| Gemini | `--temp` | `--temp 0.8` |

ç”¨æˆ·ä½¿ç”¨ç»Ÿä¸€å‘½ä»¤ï¼š
```
kapybara param temperature 0.7
```

Gateway æ ¹æ®å½“å‰ agent è‡ªåŠ¨è½¬æ¢ä¸ºæ­£ç¡®æ ¼å¼ã€‚

---

## ğŸ§ª æµ‹è¯•ç»“æœ

### æµ‹è¯•å¥—ä»¶ï¼štest_phase3.py

```
âœ… PASS - Codex Agent
âœ… PASS - Gemini Agent
âœ… PASS - Agent Switching

æ€»è®¡: 3/3 é€šè¿‡ ğŸ‰
```

### æµ‹è¯•è¦†ç›–

1. **Codex Agent Test**
   - âœ… Session åˆ›å»º
   - âœ… æ¨¡å‹é…ç½®
   - âœ… å‚æ•°é…ç½®
   - âœ… å‘½ä»¤æ„å»ºï¼ˆæ¨¡æ‹Ÿï¼‰
   - âœ… å‚æ•°æ ¼å¼éªŒè¯

2. **Gemini Agent Test**
   - âœ… Session åˆ›å»º
   - âœ… æ¨¡å‹é…ç½®
   - âœ… å‚æ•°é…ç½®
   - âœ… å‘½ä»¤æ„å»ºï¼ˆæ¨¡æ‹Ÿï¼‰
   - âœ… å‚æ•°æ ¼å¼éªŒè¯

3. **Agent Switching Test**
   - âœ… ä¸‰ä¸ª agent å‘½ä»¤å”¯ä¸€æ€§
   - âœ… å‚æ•°æ ¼å¼å·®å¼‚éªŒè¯
   - âœ… é…ç½®ç»“æ„å®Œæ•´æ€§

---

## ğŸ“š æ–‡æ¡£æ›´æ–°

### æ–°å¢æ–‡æ¡£

**docs/AGENTS.md** - å®Œæ•´çš„ Agent é…ç½®æŒ‡å—
- ä¸‰ä¸ª agent çš„è¯¦ç»†é…ç½®
- å‚æ•°å¯¹æ¯”è¡¨
- ä½¿ç”¨ç¤ºä¾‹
- æ•…éšœæ’æŸ¥
- æ€§èƒ½å¯¹æ¯”

### æ›´æ–°æ–‡æ¡£

**README.md**
- âœ… æ›´æ–°ç‰¹æ€§åˆ—è¡¨
- âœ… æ·»åŠ  Codex/Gemini è¯´æ˜

**TEST_REPORT.md** (éœ€è¦æ›´æ–°)
- Phase 3 æµ‹è¯•ç»“æœå¾…æ·»åŠ 

---

## ğŸ”§ å¯ç”¨æ–° Agent

### æ–¹æ³• 1: ä¿®æ”¹ config.yaml

```yaml
agents:
  codex:
    enabled: true  # æ”¹ä¸º true
    # ... å…¶ä»–é…ç½®
  
  gemini:
    enabled: true  # æ”¹ä¸º true
    # ... å…¶ä»–é…ç½®
```

### æ–¹æ³• 2: ä½¿ç”¨ç¤ºä¾‹é…ç½®

```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®
cp config.example.yaml config.yaml

# ç¼–è¾‘å¯ç”¨ agent
nano config.yaml
```

### æ–¹æ³• 3: å®‰è£… CLI å·¥å…·

**Codex:**
```bash
# å‡è®¾ Codex CLI å®‰è£…æ–¹å¼
npm install -g @openai/codex-cli
```

**Gemini:**
```bash
# å‡è®¾ Gemini CLI å®‰è£…æ–¹å¼
pip install google-gemini-cli
```

---

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åˆ‡æ¢åˆ° Codex

```
kapybara agent codex
kapybara model gpt5.3
kapybara param temperature 0.7
kapybara param max_tokens 2000
kapybara params

å†™ä¸€ä¸ªå¿«é€Ÿæ’åºç®—æ³•
```

### åˆ‡æ¢åˆ° Gemini

```
kapybara agent gemini
kapybara model gemini3
kapybara param temperature 0.8
kapybara params

æ€»ç»“è¿™ç¯‡é•¿æ–‡ç« ...
```

### åˆ‡æ¢å› Claude

```
kapybara agent claude
kapybara model opus
kapybara param thinking high
kapybara params

å¤æ‚çš„æ¨ç†ä»»åŠ¡...
```

---

## ğŸ—ï¸ æ¶æ„ä¼˜åŠ¿

### 1. ç»Ÿä¸€æ¥å£

æ‰€æœ‰ agent å®ç°ç›¸åŒçš„ `BaseAgent` æ¥å£ï¼š
- `create_session()`
- `send_message()`
- `destroy_session()`
- `health_check()`

### 2. çµæ´»é…ç½®

æ¯ä¸ª agent ç‹¬ç«‹é…ç½®ï¼š
- å‘½ä»¤æ ¼å¼
- æ¨¡å‹åˆ—è¡¨
- å‚æ•°æ˜ å°„
- é»˜è®¤å€¼

### 3. è‡ªåŠ¨å‚æ•°è½¬æ¢

Gateway è‡ªåŠ¨å¤„ç†ï¼š
- æ¨¡å‹åˆ«å â†’ å®Œæ•´åç§°
- å‚æ•°å â†’ CLI æ ‡å¿—
- ä¸åŒæ ¼å¼çš„å‚æ•°å€¼

### 4. æ˜“äºæ‰©å±•

æ·»åŠ æ–° agent åªéœ€è¦ï¼š
1. åˆ›å»º Agent ç±»ï¼ˆç»§æ‰¿ BaseAgentï¼‰
2. æ·»åŠ é…ç½®åˆ° config.yaml
3. åœ¨ main.py æ³¨å†Œ

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| Agent | é€Ÿåº¦ | ä¸Šä¸‹æ–‡ | æˆæœ¬ | é€‚ç”¨åœºæ™¯ |
|-------|------|--------|------|---------|
| Claude Sonnet | âš¡âš¡âš¡ | 200K | ğŸ’°ğŸ’° | æ—¥å¸¸ç¼–ç¨‹ |
| Claude Opus | âš¡âš¡ | 200K | ğŸ’°ğŸ’°ğŸ’° | å¤æ‚æ¨ç† |
| Claude Haiku | âš¡âš¡âš¡âš¡ | 200K | ğŸ’° | å¿«é€Ÿå›ç­” |
| GPT-5.3 Codex | âš¡âš¡âš¡ | 128K | ğŸ’°ğŸ’°ğŸ’° | é«˜çº§ç¼–ç¨‹ |
| Gemini 3 | âš¡âš¡âš¡ | 2M | ğŸ’° | é•¿æ–‡æœ¬ |

---

## ğŸ› å·²çŸ¥é™åˆ¶

1. **CLI å·¥å…·éœ€è¦é¢„å®‰è£…**
   - Gateway ä¸è´Ÿè´£å®‰è£… CLI å·¥å…·
   - ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å®‰è£…å¹¶é…ç½®

2. **éäº¤äº’æ¨¡å¼**
   - å½“å‰å®ç°ä½¿ç”¨éäº¤äº’æ¨¡å¼
   - æŸäº› CLI åŠŸèƒ½å¯èƒ½ä¸å¯ç”¨

3. **å‚æ•°éªŒè¯æœ‰é™**
   - Gateway ä¸éªŒè¯å‚æ•°å€¼çš„æœ‰æ•ˆæ€§
   - æ— æ•ˆå‚æ•°ä¼šå¯¼è‡´ CLI å‘½ä»¤å¤±è´¥

4. **é”™è¯¯æ¶ˆæ¯ä¾èµ– CLI**
   - é”™è¯¯å¤„ç†ä¾èµ– CLI å·¥å…·çš„è¾“å‡ºæ ¼å¼

---

## ğŸš€ ä¸‹ä¸€æ­¥

### Phase 4 å€™é€‰åŠŸèƒ½

1. **é”™è¯¯å¤„ç†å¢å¼º**
   - æ™ºèƒ½é‡è¯•æœºåˆ¶
   - å‚æ•°å€¼éªŒè¯
   - æ›´å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

2. **æ—¥å¿—ç³»ç»Ÿå®Œå–„**
   - ç»“æ„åŒ–æ—¥å¿—ï¼ˆJSON Linesï¼‰
   - æŒ‰ agent åˆ†ç±»
   - æ€§èƒ½æŒ‡æ ‡æ”¶é›†

3. **ç›‘æ§å’Œç»Ÿè®¡**
   - `/stats` å‘½ä»¤
   - ä½¿ç”¨æƒ…å†µç»Ÿè®¡
   - æˆæœ¬è¿½è¸ª

4. **äº¤äº’æ¨¡å¼æ”¯æŒ**
   - æŒä¹… CLI è¿›ç¨‹
   - çœŸæ­£çš„ session ç®¡ç†
   - æ”¯æŒ CLI åŸç”Ÿå‘½ä»¤

5. **Web UI**
   - åŸºäº Web çš„ç®¡ç†ç•Œé¢
   - å®æ—¶ç›‘æ§
   - é…ç½®å¯è§†åŒ–ç¼–è¾‘

---

## âœ¨ æ€»ç»“

**Phase 3 æˆåŠŸå®Œæˆï¼** ğŸ‰

- âœ… 3 ä¸ª Agent å…¨éƒ¨å®ç°
- âœ… ç»Ÿä¸€çš„å‘½ä»¤æ¥å£
- âœ… è‡ªåŠ¨å‚æ•°æ ¼å¼è½¬æ¢
- âœ… å®Œæ•´æµ‹è¯•è¦†ç›–
- âœ… è¯¦ç»†æ–‡æ¡£
- âœ… æ˜“äºæ‰©å±•çš„æ¶æ„

**ä»£ç è´¨é‡ï¼šA+** ğŸ†

**å‡†å¤‡å°±ç»ªç”¨äºç”Ÿäº§ç¯å¢ƒ** âœ…

---

**å·¥ç¨‹å¸ˆï¼š** Kapybara ğŸ¦«  
**å®¡æ ¸è€…ï¼š** SS  
**å®Œæˆæ—¶é—´ï¼š** 2026-02-07 17:07 UTC
